{"ast":null,"code":"import _regeneratorRuntime from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Main from'./Main';import React,{useEffect,useState}from\"react\";import{useAuthState}from\"react-firebase-hooks/auth\";import{useHistory}from\"react-router\";import{auth,db}from\"./firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var history=useHistory();var refreshPage=function refreshPage(){history.replace(\"/\");window.location.reload();};useEffect(function(){var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var query,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return db.collection(\"users\").where(\"uid\",\"==\",user===null||user===void 0?void 0:user.uid).get();case 3:query=_context.sent;_context.next=6;return query.docs[0].data();case 6:data=_context.sent;setName(data.name);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(\"An error occured while fetching user data\");case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();if(loading)return;if(!user)return refreshPage();fetchUserName();},[user,loading]);return/*#__PURE__*/_jsx(\"div\",{children:user?/*#__PURE__*/_jsx(Main,{}):/*#__PURE__*/_jsx(\"div\",{children:refreshPage()})});}export default App;","map":{"version":3,"sources":["D:/React Projects/my-app/src/App.js"],"names":["Main","React","useEffect","useState","useAuthState","useHistory","auth","db","App","user","loading","error","name","setName","history","refreshPage","replace","window","location","reload","fetchUserName","collection","where","uid","get","query","docs","data","console","alert"],"mappings":"0aAAA,MAAOA,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,IAAT,CAAeC,EAAf,KAAyB,YAAzB,C,2CAGA,QAASC,CAAAA,GAAT,EAAe,CACb,kBAA+BJ,YAAY,CAACE,IAAD,CAA3C,gDAAOG,IAAP,mBAAaC,OAAb,mBAAsBC,KAAtB,mBACA,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,OAAO,CAAGT,UAAU,EAA1B,CACA,GAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAI,CACpBD,OAAO,CAACE,OAAR,CAAgB,GAAhB,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GAEF,CAJF,CAKAjB,SAAS,CAAC,UAAM,CAEd,GAAMkB,CAAAA,aAAa,0FAAG,wLAEEb,CAAAA,EAAE,CACnBc,UADiB,CACN,OADM,EAEjBC,KAFiB,CAEX,KAFW,CAEJ,IAFI,CAEEb,IAFF,SAEEA,IAFF,iBAEEA,IAAI,CAAEc,GAFR,EAGjBC,GAHiB,EAFF,QAEZC,KAFY,qCAMCA,CAAAA,KAAK,CAACC,IAAN,CAAW,CAAX,EAAcC,IAAd,EAND,QAMZA,IANY,eAOlBd,OAAO,CAACc,IAAI,CAACf,IAAN,CAAP,CAPkB,iFASlBgB,OAAO,CAACjB,KAAR,cACAkB,KAAK,CAAC,2CAAD,CAAL,CAVkB,qEAAH,kBAAbT,CAAAA,aAAa,0CAAnB,CAaA,GAAIV,OAAJ,CAAa,OACb,GAAI,CAACD,IAAL,CAAW,MAAQM,CAAAA,WAAW,EAAnB,CAEXK,aAAa,GACd,CAnBQ,CAmBN,CAACX,IAAD,CAAOC,OAAP,CAnBM,CAAT,CAoBA,mBACE,qBAGID,IAAI,cACA,KAAC,IAAD,IADA,cAEA,qBAAMM,WAAW,EAAjB,EALR,EADF,CAUD,CAED,cAAeP,CAAAA,GAAf","sourcesContent":["import Main from './Main';\nimport React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useHistory } from \"react-router\";\nimport { auth, db } from \"./firebase\";\n\n\nfunction App() {\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const history = useHistory();\n  const refreshPage = ()=>{\n      history.replace(\"/\");\n      window.location.reload();\n      \n   }\n  useEffect(() => {\n    \n    const fetchUserName = async () => {\n      try {\n        const query = await db\n          .collection(\"users\")\n          .where(\"uid\", \"==\", user?.uid)\n          .get();\n        const data = await query.docs[0].data();\n        setName(data.name);\n      } catch (err) {\n        console.error(err);\n        alert(\"An error occured while fetching user data\");\n      }\n    };\n    if (loading) return;\n    if (!user) return (refreshPage());\n    \n    fetchUserName();\n  }, [user, loading]);\n  return (\n    <div>\n      \n      {\n        user \n          ? <Main/>\n          : <div>{refreshPage()}</div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}