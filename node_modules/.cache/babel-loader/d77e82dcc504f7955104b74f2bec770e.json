{"ast":null,"code":"var _jsxFileName = \"D:\\\\React Projects\\\\my-app\\\\src\\\\pages\\\\History.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState, useEffect } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useHistory } from \"react-router\";\nimport { auth, db, app, CurrentUser } from \"../firebase\";\nimport * as utils from \"../Util\";\nimport Transaction from './Transaction';\nimport { DataGrid } from \"@mui/x-data-grid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction History() {\n  _s();\n\n  const [user, loading, error] = useAuthState(auth);\n  const [history_, setHistory_] = useState([]);\n  const history = useHistory();\n  const columns = [{\n    field: 'id',\n    headerName: 'ID',\n    width: 70\n  }, {\n    field: 'name',\n    headerName: 'Transaction Name',\n    width: 200\n  }, {\n    field: 'price',\n    headerName: 'Price',\n    width: 150\n  }, {\n    field: 'date',\n    headerName: 'Date',\n    width: 200\n  }, {\n    field: 'type',\n    headerName: 'Type',\n    width: 150\n  }];\n  useEffect(() => {\n    const fetchUserName = async () => {\n      try {\n        const query = await db.collection(\"users\").where(\"uid\", \"==\", user === null || user === void 0 ? void 0 : user.uid).get();\n        const data = await query.docs[0].data();\n      } catch (err) {\n        console.error(err);\n        alert(\"An error occured while fetching user data\");\n      }\n    };\n\n    if (loading) return;\n    if (!user) return history.replace(\"/\");\n    app.database().ref('Transactions/' + (user === null || user === void 0 ? void 0 : user.uid)).on(\"value\", data => {\n      console.log(data.val());\n\n      if (data.val() !== null) {\n        const eachExpense = utils.eachExpense(data.val());\n        const thisUsersExpenses = utils.currentUsersExpenses(eachExpense, user);\n        setHistory_(thisUsersExpenses);\n      }\n    });\n    fetchUserName();\n  }, [user, loading, history]);\n  return (\n    /*#__PURE__*/\n    //     <div className=\"latestTransactions\">\n    //     <p>Latest Transactions</p>\n    //     <ul>\n    //         {\n    //             Object.keys(history_).map((id) => (\n    //                 <Transaction key={id}\n    //                     type={history_[id].value.type}\n    //                     name={history_[id].value.name}\n    //                     price={history_[id].value.price}\n    //                 />\n    //             ))\n    //         }\n    //     </ul>\n    // </div>\n    _jsxDEV(\"div\", {\n      style: {\n        height: 400,\n        width: '100%'\n      },\n      children: /*#__PURE__*/_jsxDEV(DataGrid, {\n        rows: [Object.keys(history_).map(id => ({\n          id: id,\n          name: history_[id].value.name,\n          price: history_[id].value.type === income ? +1 * parseFloat(history_[id].value.price) : -1 * parseFloat(history_[id].value.price),\n          date: history_[id].value.date,\n          type: history_[id].value.type\n        }))][0],\n        columns: columns,\n        pageSize: 5,\n        rowsPerPageOptions: [100],\n        checkboxSelection: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }, this)\n  );\n}\n\n_s(History, \"L1Zu4oe0BqFMODUyo2+boUiZFt4=\", false, function () {\n  return [useAuthState, useHistory];\n});\n\n_c = History;\nexport default History;\n\nvar _c;\n\n$RefreshReg$(_c, \"History\");","map":{"version":3,"sources":["D:/React Projects/my-app/src/pages/History.js"],"names":["React","Component","useState","useEffect","useAuthState","useHistory","auth","db","app","CurrentUser","utils","Transaction","DataGrid","History","user","loading","error","history_","setHistory_","history","columns","field","headerName","width","fetchUserName","query","collection","where","uid","get","data","docs","err","console","alert","replace","database","ref","on","log","val","eachExpense","thisUsersExpenses","currentUsersExpenses","height","Object","keys","map","id","name","value","price","type","income","parseFloat","date"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { useHistory } from \"react-router\";\r\nimport { auth, db,app,CurrentUser } from \"../firebase\";\r\nimport * as utils from \"../Util\";\r\nimport Transaction from './Transaction';\r\nimport { DataGrid } from \"@mui/x-data-grid\";\r\n\r\n\r\nfunction History() {\r\n    const [user, loading, error] = useAuthState(auth);\r\n    const [history_, setHistory_] = useState([]);\r\n    const history = useHistory();\r\n    const columns = [\r\n        { field: 'id', headerName: 'ID', width: 70 },\r\n        { field: 'name', headerName: 'Transaction Name', width: 200 },\r\n        { field: 'price', headerName: 'Price', width: 150 },\r\n        {\r\n          field: 'date',\r\n          headerName: 'Date',\r\n          width: 200,\r\n        },\r\n        { field: 'type', headerName: 'Type', width: 150 },\r\n        \r\n      ];\r\n      \r\n    useEffect(() => {\r\n    \r\n        const fetchUserName = async () => {\r\n          try {\r\n            const query = await db\r\n              .collection(\"users\")\r\n              .where(\"uid\", \"==\", user?.uid)\r\n              .get();\r\n            const data = await query.docs[0].data();\r\n            \r\n            \r\n          } catch (err) {\r\n            console.error(err);\r\n            alert(\"An error occured while fetching user data\");\r\n          }\r\n        };\r\n        if (loading) return;\r\n        if (!user) return history.replace(\"/\");\r\n        \r\n\r\n        app.database().ref('Transactions/' + user?.uid).on(\"value\", data => {\r\n            console.log(data.val());\r\n            if(data.val() !== null)\r\n            {\r\n            const eachExpense = utils.eachExpense(data.val());\r\n            const thisUsersExpenses = utils.currentUsersExpenses(eachExpense, user);\r\n            \r\n            setHistory_(thisUsersExpenses);\r\n            \r\n           }\r\n          });\r\n\r\n        fetchUserName();\r\n      }, [user, loading,\r\n        history]);\r\n\r\n        \r\n  return (\r\n    //     <div className=\"latestTransactions\">\r\n    //     <p>Latest Transactions</p>\r\n    //     <ul>\r\n    //         {\r\n                \r\n    //             Object.keys(history_).map((id) => (\r\n    //                 <Transaction key={id}\r\n    //                     type={history_[id].value.type}\r\n    //                     name={history_[id].value.name}\r\n    //                     price={history_[id].value.price}\r\n    //                 />\r\n    //             ))\r\n    //         }\r\n    //     </ul>\r\n    // </div>\r\n    <div style={{ height: 400, width: '100%' }}>\r\n      <DataGrid\r\n        rows={\r\n            [Object.keys(history_).map((id) => (\r\n              {\r\n                  id: id,\r\n                  name: history_[id].value.name,\r\n                  price: history_[id].value.type === income ?  +1 * parseFloat(history_[id].value.price) : -1 * parseFloat(history_[id].value.price),\r\n                  date: history_[id].value.date,\r\n                  type: history_[id].value.type,\r\n              }\r\n          ))][0]\r\n        }\r\n        columns={columns}\r\n        pageSize={5}\r\n        rowsPerPageOptions={[100]}\r\n        checkboxSelection\r\n      />\r\n      \r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;"]},"metadata":{},"sourceType":"module"}