{"ast":null,"code":"import _slicedToArray from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/React Projects/my-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import firebase from'firebase/compat/app';import'firebase/compat/auth';import'firebase/compat/database';import'firebase/compat/firestore';import{useAuthState}from\"react-firebase-hooks/auth\";// // Import the functions you need from the SDKs you need\n// import { initializeApp } from \"firebase/app\";\n// import { getAnalytics } from \"firebase/analytics\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nvar firebaseConfig={apiKey:\"AIzaSyA4HI9Pe226EHYr1EU1gt___ojPAfFd4PM\",authDomain:\"smartl-11d4c.firebaseapp.com\",databaseURL:\"https://smartl-11d4c-default-rtdb.asia-southeast1.firebasedatabase.app\",projectId:\"smartl-11d4c\",storageBucket:\"smartl-11d4c.appspot.com\",messagingSenderId:\"301086926501\",appId:\"1:301086926501:web:8429d75cb8a36f6a3c4f4c\",measurementId:\"G-MTMFKNLM0N\"};// Initialize Firebase\nvar app=firebase.initializeApp(firebaseConfig);var auth=app.auth();var db=app.firestore();var googleProvider=new firebase.auth.GoogleAuthProvider();/*\r\n    Source: https://blog.logrocket.com/user-authentication-firebase-react-apps/\r\n */var signInWithGoogle=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,user,query;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return auth.signInWithPopup(googleProvider);case 3:res=_context.sent;user=res.user;_context.next=7;return db.collection(\"users\").where(\"uid\",\"==\",user.uid).get();case 7:query=_context.sent;if(!(query.docs.length===0)){_context.next=11;break;}_context.next=11;return db.collection(\"users\").add({uid:user.uid,name:user.displayName,authProvider:\"google\",email:user.email});case 11:_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(_context.t0.message);case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function signInWithGoogle(){return _ref.apply(this,arguments);};}();var signInWithEmailAndPassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return auth.signInWithEmailAndPassword(email,password);case 3:_context2.next=9;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);alert(_context2.t0.message);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function signInWithEmailAndPassword(_x,_x2){return _ref2.apply(this,arguments);};}();var registerWithEmailAndPassword=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name,email,password){var res,user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return auth.createUserWithEmailAndPassword(email,password);case 3:res=_context3.sent;user=res.user;_context3.next=7;return db.collection(\"users\").add({uid:user.uid,name:name,authProvider:\"local\",email:email});case 7:_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);alert(_context3.t0.message);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function registerWithEmailAndPassword(_x3,_x4,_x5){return _ref3.apply(this,arguments);};}();var sendPasswordResetEmail=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return auth.sendPasswordResetEmail(email);case 3:alert(\"Password reset link sent!\");_context4.next=10;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);alert(_context4.t0.message);case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function sendPasswordResetEmail(_x6){return _ref4.apply(this,arguments);};}();var logout=function logout(){auth.signOut();};var CurrentUser=function CurrentUser(){var _useAuthState=useAuthState(firebase.auth()),_useAuthState2=_slicedToArray(_useAuthState,3),user=_useAuthState2[0],loading=_useAuthState2[1],error=_useAuthState2[2];return{user:user};};export{app,auth,db,signInWithGoogle,CurrentUser,signInWithEmailAndPassword,registerWithEmailAndPassword,sendPasswordResetEmail,logout};","map":{"version":3,"sources":["D:/React Projects/my-app/src/firebase.js"],"names":["firebase","useAuthState","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","initializeApp","auth","db","firestore","googleProvider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","res","user","collection","where","uid","get","query","docs","length","add","name","displayName","authProvider","email","console","error","alert","message","signInWithEmailAndPassword","password","registerWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","logout","signOut","CurrentUser","loading"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\r\nimport 'firebase/compat/auth';\r\nimport 'firebase/compat/database';\r\nimport 'firebase/compat/firestore';\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\n\r\n// // Import the functions you need from the SDKs you need\r\n// import { initializeApp } from \"firebase/app\";\r\n// import { getAnalytics } from \"firebase/analytics\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA4HI9Pe226EHYr1EU1gt___ojPAfFd4PM\",\r\n  authDomain: \"smartl-11d4c.firebaseapp.com\",\r\n  databaseURL: \"https://smartl-11d4c-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"smartl-11d4c\",\r\n  storageBucket: \"smartl-11d4c.appspot.com\",\r\n  messagingSenderId: \"301086926501\",\r\n  appId: \"1:301086926501:web:8429d75cb8a36f6a3c4f4c\",\r\n  measurementId: \"G-MTMFKNLM0N\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = firebase.initializeApp(firebaseConfig);\r\nconst auth = app.auth();\r\nconst db = app.firestore();\r\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\n/*\r\n    Source: https://blog.logrocket.com/user-authentication-firebase-react-apps/\r\n */\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    const res = await auth.signInWithPopup(googleProvider);\r\n    const user = res.user;\r\n    const query = await db\r\n      .collection(\"users\")\r\n      .where(\"uid\", \"==\", user.uid)\r\n      .get();\r\n    if (query.docs.length === 0) {\r\n      await db.collection(\"users\").add({\r\n        uid: user.uid,\r\n        name: user.displayName,\r\n        authProvider: \"google\",\r\n        email: user.email,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\n\r\nconst signInWithEmailAndPassword = async (email, password) => {\r\n  try {\r\n    await auth.signInWithEmailAndPassword(email, password);\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\nconst registerWithEmailAndPassword = async (name, email, password) => {\r\n  try {\r\n    const res = await auth.createUserWithEmailAndPassword(email, password);\r\n    const user = res.user;\r\n    await db.collection(\"users\").add({\r\n      uid: user.uid,\r\n      name,\r\n      authProvider: \"local\",\r\n      email,\r\n    });\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\nconst sendPasswordResetEmail = async (email) => {\r\n  try {\r\n    await auth.sendPasswordResetEmail(email);\r\n    alert(\"Password reset link sent!\");\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\nconst logout = () => {\r\n  auth.signOut();\r\n};\r\nconst CurrentUser = () => {\r\n    const [user, loading, error] = useAuthState(firebase.auth());\r\n  \r\n    return {user}\r\n  };\r\n\r\nexport {\r\n  app,\r\n  auth,\r\n  db,\r\n  signInWithGoogle,\r\n  CurrentUser,\r\n  signInWithEmailAndPassword,\r\n  registerWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  logout,\r\n};"]},"metadata":{},"sourceType":"module"}