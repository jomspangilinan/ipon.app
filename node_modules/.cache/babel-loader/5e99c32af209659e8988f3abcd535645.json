{"ast":null,"code":"var _jsxFileName = \"D:\\\\React Projects\\\\my-app\\\\src\\\\pages\\\\History.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Transaction from './Transaction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction History() {\n  _s();\n\n  const [user, loading, error] = useAuthState(auth);\n  const [history_, setHistory_] = useState([]);\n  useEffect(() => {\n    const fetchUserName = async () => {\n      try {\n        const query = await db.collection(\"users\").where(\"uid\", \"==\", user === null || user === void 0 ? void 0 : user.uid).get();\n        const data = await query.docs[0].data();\n        app.database().ref('Transactions/' + (user === null || user === void 0 ? void 0 : user.uid)).on(\"value\", data => {\n          console.log(data.val());\n\n          if (data.val() !== null) {\n            const eachExpense = utils.eachExpense(data.val());\n            const thisUsersExpenses = utils.currentUsersExpenses(eachExpense, user);\n            setHistory_(thisUsersExpenses);\n          }\n        });\n      } catch (err) {\n        console.error(err);\n        alert(\"An error occured while fetching user data\");\n      }\n    };\n\n    if (loading) return;\n    if (!user) return history.replace(\"/\");\n    fetchUserName();\n  }, [user, loading, history]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"latestTransactions\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Latest Transactions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: Object.keys(history_).map(id => /*#__PURE__*/_jsxDEV(Transaction, {\n        type: history_[id].value.type,\n        name: history_[id].value.name,\n        price: history_[id].value.price\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n\n_s(History, \"z0bS/Y6ENT0rPEbgY8FPE+/mmJI=\", true);\n\n_c = History;\nexport default History;\n\nvar _c;\n\n$RefreshReg$(_c, \"History\");","map":{"version":3,"sources":["D:/React Projects/my-app/src/pages/History.js"],"names":["React","Transaction","History","user","loading","error","useAuthState","auth","history_","setHistory_","useState","useEffect","fetchUserName","query","db","collection","where","uid","get","data","docs","app","database","ref","on","console","log","val","eachExpense","utils","thisUsersExpenses","currentUsersExpenses","err","alert","history","replace","Object","keys","map","id","value","type","name","price"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,eAAxB;;;AAEA,SAASC,OAAT,GAAmB;AAAA;;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,EAAgBC,KAAhB,IAAyBC,YAAY,CAACC,IAAD,CAA3C;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BC,QAAQ,CAAC,EAAD,CAAxC;AACAC,EAAAA,SAAS,CAAC,MAAM;AAEZ,UAAMC,aAAa,GAAG,YAAY;AAChC,UAAI;AACF,cAAMC,KAAK,GAAG,MAAMC,EAAE,CACnBC,UADiB,CACN,OADM,EAEjBC,KAFiB,CAEX,KAFW,EAEJ,IAFI,EAEEb,IAFF,aAEEA,IAFF,uBAEEA,IAAI,CAAEc,GAFR,EAGjBC,GAHiB,EAApB;AAIA,cAAMC,IAAI,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,CAAX,EAAcD,IAAd,EAAnB;AAEAE,QAAAA,GAAG,CAACC,QAAJ,GAAeC,GAAf,CAAmB,mBAAkBpB,IAAlB,aAAkBA,IAAlB,uBAAkBA,IAAI,CAAEc,GAAxB,CAAnB,EAAgDO,EAAhD,CAAmD,OAAnD,EAA4DL,IAAI,IAAI;AAClEM,UAAAA,OAAO,CAACC,GAAR,CAAYP,IAAI,CAACQ,GAAL,EAAZ;;AACA,cAAGR,IAAI,CAACQ,GAAL,OAAe,IAAlB,EACA;AACA,kBAAMC,WAAW,GAAGC,KAAK,CAACD,WAAN,CAAkBT,IAAI,CAACQ,GAAL,EAAlB,CAApB;AACA,kBAAMG,iBAAiB,GAAGD,KAAK,CAACE,oBAAN,CAA2BH,WAA3B,EAAwCzB,IAAxC,CAA1B;AAEAM,YAAAA,WAAW,CAACqB,iBAAD,CAAX;AAEA;AACD,SAVD;AAWD,OAlBD,CAkBE,OAAOE,GAAP,EAAY;AACZP,QAAAA,OAAO,CAACpB,KAAR,CAAc2B,GAAd;AACAC,QAAAA,KAAK,CAAC,2CAAD,CAAL;AACD;AACF,KAvBD;;AAwBA,QAAI7B,OAAJ,EAAa;AACb,QAAI,CAACD,IAAL,EAAW,OAAO+B,OAAO,CAACC,OAAR,CAAgB,GAAhB,CAAP;AAEXvB,IAAAA,aAAa;AACd,GA9BM,EA8BJ,CAACT,IAAD,EAAOC,OAAP,EACD8B,OADC,CA9BI,CAAT;AAgCF,sBACM;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA,4BACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADA,eAEA;AAAA,gBAEQE,MAAM,CAACC,IAAP,CAAY7B,QAAZ,EAAsB8B,GAAtB,CAA2BC,EAAD,iBACtB,QAAC,WAAD;AACI,QAAA,IAAI,EAAE/B,QAAQ,CAAC+B,EAAD,CAAR,CAAaC,KAAb,CAAmBC,IAD7B;AAEI,QAAA,IAAI,EAAEjC,QAAQ,CAAC+B,EAAD,CAAR,CAAaC,KAAb,CAAmBE,IAF7B;AAGI,QAAA,KAAK,EAAElC,QAAQ,CAAC+B,EAAD,CAAR,CAAaC,KAAb,CAAmBG;AAH9B,SAAkBJ,EAAlB;AAAA;AAAA;AAAA;AAAA,cADJ;AAFR;AAAA;AAAA;AAAA;AAAA,YAFA;AAAA;AAAA;AAAA;AAAA;AAAA,UADN;AAgBD;;GAnDQrC,O;;KAAAA,O;AAqDT,eAAeA,OAAf","sourcesContent":["import React from 'react';\r\nimport Transaction from './Transaction';\r\n\r\nfunction History() {\r\n    const [user, loading, error] = useAuthState(auth);\r\n    const [history_, setHistory_] = useState([]);\r\n    useEffect(() => {\r\n    \r\n        const fetchUserName = async () => {\r\n          try {\r\n            const query = await db\r\n              .collection(\"users\")\r\n              .where(\"uid\", \"==\", user?.uid)\r\n              .get();\r\n            const data = await query.docs[0].data();\r\n            \r\n            app.database().ref('Transactions/' + user?.uid).on(\"value\", data => {\r\n              console.log(data.val());\r\n              if(data.val() !== null)\r\n              {\r\n              const eachExpense = utils.eachExpense(data.val());\r\n              const thisUsersExpenses = utils.currentUsersExpenses(eachExpense, user);\r\n              \r\n              setHistory_(thisUsersExpenses);\r\n              \r\n             }\r\n            });\r\n          } catch (err) {\r\n            console.error(err);\r\n            alert(\"An error occured while fetching user data\");\r\n          }\r\n        };\r\n        if (loading) return;\r\n        if (!user) return history.replace(\"/\");\r\n        \r\n        fetchUserName();\r\n      }, [user, loading,\r\n        history]);\r\n  return (\r\n        <div className=\"latestTransactions\">\r\n        <p>Latest Transactions</p>\r\n        <ul>\r\n            {\r\n                Object.keys(history_).map((id) => (\r\n                    <Transaction key={id}\r\n                        type={history_[id].value.type}\r\n                        name={history_[id].value.name}\r\n                        price={history_[id].value.price}\r\n                    />\r\n                ))\r\n            }\r\n        </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default History;"]},"metadata":{},"sourceType":"module"}